\documentclass[12pt]{article}

\usepackage{sbc-template}
\usepackage{listings}

\usepackage{graphicx,url}

\usepackage[brazil]{babel}   
\usepackage[latin1]{inputenc}  

     
\sloppy

\title{Data Warehouses:\\ HP Vertica e armazenamento colunar}

\author{Athos C. Ribeiro\inst{1}, Karoline Bonome\inst{2}, Márcio Stabile\inst{1} }


\address{Departamento de Ciência da Computação, \\
  Instituto de Matemática e Estatística, Universidade de São Paulo
\nextinstitute
  Departamento de Informática em Saúde\\
  Escola Paulista de Medicina, Universidade Federal de São Paulo
  \email{\{athoscr,mstabile\}@ime.usp.br, kbonome@gmail.com}
}

\begin{document} 

\maketitle

\begin{abstract}
  Do we need an abstract here? I think we do!
\end{abstract}
     
\begin{resumo} 
  Precisamos de um resumo aqui? Acho que sim!
\end{resumo}


\section{Motivação} % Contextualização e motivação do tema

%Aqui diria por que Data Warehouses são legais \cite{kimball2011data}


De acordo com \cite{Elmasri1999}, o crescente poder de processamento e a sofisticação das ferramentas e técnicas analíticas resultaram no desenvolvimento das \textit{data warehouses}. \textit{Data warehouses} comumente oferecem armazenamento, funcionalidades e responsividade a consultas de um modo que não pode ser realizado em bancos de dados relacionais orientados a transação. Além disso, possuem seu foco em proporcionar informações que sejam úteis a usuários responsáveis por atividades gerenciais, dando suporte à tomada de decisões. Além disso, segundo \cite{Takecian2014}, com o passar dos anos houve um grande crescimento do número de aplicações que necessitam integrar dados provenientes de diversas fontes distintas e muitas vezes o modelo que mais se encaixava na resolução dos problemas de integração de dados é a utilização de um \textit{data warehouse}.

\section{Conceitos básicos} \label{sec:firstpage} %Principais conceitos relacionados ao tema

%Dar uma explicada com base no livro de Data Warehouse o que são elas. \cite{Inmon1992}

Apesar de não haver uma definição única para o que é um \textit{data warehouse}, \cite{Inmon1992} a define como uma coleção de dados orientada a assunto, integrada, não volátil e variável no tempo para o suporte às decisões de gerência. 

A primeira característica de uma \textit{data warehouse} é a orientação a assuntos. Nela é dito que cada tipo de empresa possui seu próprio conjunto de assuntos de interesse, assim, a \textit{data warehouse} deve ser específica e espelhar o domínio de aplicação da organização que a usa.

A segunda principal característica das \textit{data warehouses} é a integração. Como os dados contidos em uma \textit{data warehouse} são provenientes de múltiplas fontes, frequentemente existem diferenças em como os mesmos dados são representados em cada sistema de origem, como ilustra a figura \ref{fig:integracao}, tornando necessária a execução de operações como conversão, re-formatação e re-sequenciamento para que só então os dados sejam armazenados dentro da estrutura da \textit{data warehouse}.

A não volatilidade define que diferentemente dos SGBDs convencionais onde os dados são acessados e manipulados frequentemente em pequenas quantidades, os dados de uma \textit{data warehouse} são carregados e acessados em massa e não são atualizados. Quando dados são carregados, esse carregamento é feito através de \textit{snapshots} e quando ocorrem alterações nos dados, um novo \textit{snapshot} é carregado, mantendo o histórico dos dados armazenados.

A última característica das \textit{data warehouses} é a variação no tempo. Variação de tempo implica que cada unidade de dados na \textit{data warehouse} é válida em algum um momento no tempo. Em alguns casos, um registro possui um carimbo de tempo. Em outros casos, um registro tem uma data de transação. Mas, em todos os casos, existe alguma forma de marcação de tempo para exibir o momento no tempo no qual o registro é válido.

\begin{figure}[ht]
\centering
\includegraphics[width=.99\textwidth]{images/integracao.png}
\caption{Problemas de integração. \cite{Inmon1992}.}
\label{fig:integracao}
\end{figure}

%ETL
%\textit{Extract-Transform-Load} (ETL)
% Dado que as diferentes informações de um DWH vêm de fontes diferentes, é necessários que se integrem tais fontes...

%OLAP
%\textit{On-Line Analytical Processing} (OLAP)

%ROLAP vs MOLAP vs HOLAP

%CUBOS

\section{Estado da arte} %Descrição do estado da arte de trabalhos teóricos e também de ferramentas de software relacionadas ao tema
%Falar as ferramentas que existem, mostrar o SpagoBI, o Vertica e talvez algum outro se achar artigos

Até alguns anos atrás, o uso industrial de ferramentas \textit{open source} para \textit{Business Intelligence} ainda não era tão abrangente quanto o uso de ferramentas proprietárias. Ferramentas ETL ainda não eram maduras o suficiente e ferramentas OLAP não eram tão robustas para uso comercial. Em geral, um dos maiores problemas encontrados para a maior parte das ferramentas era a falta de documentação apropriada. \cite{thomsen2005survey}.

A crescente demanda por ferramentas de \textit{Business Intelligence} tem atraído diversas empresas para esta área, como é possível ver na tabela \ref{tab:tools}. Isto também tem acontecido no mundo de ferramentas Livres, onde diversas soluções interessantes têm surgido nos últimos anos \cite{gioia2008spagobi}. Dentre tais ferramentas, duas que têm se destacado nos últimos anos são a Pentaho, com um sistema de licença Livre e comercial, onde a última adiciona módulos proprietários, documentação e serviços à ferramenta, e a SpagoBI, com uma filosofia totalmente Livre (sem versões comerciais).

\begin{table}[]
\centering
\begin{tabular}{|l|l|c|c|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Nome}} & \multicolumn{1}{c|}{\textbf{Empresa}} & \textbf{Licença} & \textbf{\begin{tabular}[c]{@{}c@{}}Rank\\ DB-Engines\end{tabular}} & \textbf{Armazenamento} \\ \hline
Microsoft Analytics & Microsoft & Pago & - & Não informado \\ \hline
Oracle Data Warehouse & Oracle & Pago & - & Não informado \\ \hline
IMB dashDB & IBM & Pago & 113 & \begin{tabular}[c]{@{}c@{}}Armazenamento\\ Colunar e por Linhas\end{tabular} \\ \hline
Amazon Redshift & Amazon & Pago & 37 & \begin{tabular}[c]{@{}c@{}}Armazenamento\\ Colunar\end{tabular} \\ \hline
Mondrian & Hitachi & Community & - & Hybrid OLAP \\ \hline
Vertica & HP & Community & 30 & \begin{tabular}[c]{@{}c@{}}Armazenamento\\ Colunar\end{tabular} \\ \hline
Spago BI & - & Livre & - & ROLAP + Mondrian \\ \hline
\end{tabular}
\caption{Ferramentas para Data Warehouse}
\label{tab:tools}
\end{table}

\subsection{Ferramentas}

\subsubsection{Mondrian}

Mondrian, que é parte do projeto Pentaho\footnote{\url{pentaho.com}}, é um servidor OLAP implementado em Java orientado a ROLAP e pode ser utilizado com qualquer SGBD que possua um \textit{driver} JDBC \cite{thomsen2005survey}. Licenciado sob \textit{Eclipse Public License 1.0}\footnote{\url{http://www.eclipse.org/legal/epl-v10.html}}, o Mondrian é uma ferramenta livre. A documentação\footnote{\url{http://mondrian.pentaho.com/documentation}} da ferramenta afirma que ela é capaz de trabalhar com conjuntos de dados de tamanho significativo, desde que o SGBD seja capaz de trabalhar com tal conjunto de dados, dado que as agregações são realizadas pelos SGBDs.

Mondrian executa consultas escritas em linguagem MDX (\textit{Multi-Dimentional Expressions})\footnote{linguagem introduzida pela Microsoft em 1998, posteriormente proposto como padrão pela empresa, aumentando sua adoção em meio a desenvolvedores de aplicações} e apresenta resultados em um formato multidimensional\footnote{Embora os formatos sejam apresentados em formato multidimensional, os mesmos são armazenados em formato relacional} através de uma API em Java. A ferramenta utiliza cubos particionados, permitindo diversas tabelas de fatos (um cubo particionado possui diversas tabelas de fatos).

\begin{lstlisting}[caption=Exemplo de consulta em MDX]
SELECT {[Measures].[Unit Sales], [Measures].[Store Sales]}
    ON COLUMNS, {[Product].members} ON ROWS
FROM [Sales]
WHERE [Time].[1997].[Q2] 
\end{lstlisting}

A arquitetura da ferramenta é definida em 4 camadas e pode ser vista na figura \ref{fig:mondrian}:

\begin{itemize}
  \item Camada de apresentação
  \item Camada dimensional
  \item Camada estrela (\textit{Star Layer})
  \item Camada de armazenamento
\end{itemize}

A \textbf{camada de apresentação} determina como o usuário visualiza e interage com os dados. Na \textbf{camada dimensional}, as consultas em MDX são avaliadas e executadas. A \textbf{camada estrela} é responsável por manter as agregações em cache, quando a camada dimensional envia requisições e as agregações requisitadas não possuem e nem podem derivar os conjuntos de valores requisitados, uma requisição à \textbf{camada de armazenamento} é realizada. Esta camada é composta por um SGBD relacional.

\begin{figure}[ht]
\centering
\includegraphics[width=.99\textwidth]{images/mondrian_arch.png}
\caption{Arquitetura: Mondrian. Fonte: mondrian.pentaho.com}
\label{fig:mondrian}
\end{figure}

\subsubsection{SpagoBI}

SpagoBI é uma plataforma completa de integração para \textit{Business Intelligence}, cobrindo toda a extensão de necessidades de análise, incluindo ETL, OLAP e \textbf{data mining}. Esta integração é feita através de \textit{engines}, possibilitando que o usuário escolha quais ferramentas devem compor sua plataforma \cite{gioia2008spagobi}. As ferramentas que compõem os diversos módulos da SpagoBI podem ser parte do projeto SpagoBI, ferramentas de outros projetos de Licenças Livres ou variações de tais projetos. \cite{golfarelli2009open}

A arquitetura da ferramenta é definida em 3 camadas que podem ser vistas na figura \ref{fig:spagoBI}:

\begin{itemize}
  \item Camada de entrega
  \item Camada analítica
  \item Camada de dados e metadados
\end{itemize}

\begin{figure}[ht]
\centering
\includegraphics[width=.99\textwidth]{images/spagoBI_arch.png}
\caption{Arquitetura: SagoBI. Fonte: wiki.spagobi.org}
\label{fig:spagoBI}
\end{figure}

\section{Vertica}%Um pouco mais de detalhes de ao menos uma ferramenta escolhida para ilustrar a implementação de conceitos abordados no trabalho

Aqui começamos a mostrar por que o Vertica é legal. Armazenamento

\section{Estudo de caso}\label{sec:figs}%Um estudo de caso, reportando o uso da ferramenta escolhida para a criação e manipulação de um banco de dados de exemplo.

Rodar o Vertica e escrever (com imagens) como se usa, desde os dados no banco relacional até a consulta.

\section{Conclusão}

%\begin{figure}[ht]
%\centering
%\includegraphics[width=.5\textwidth]{fig1.jpg}
%\caption{A typical figure}
%\label{fig:exampleFig1}
%\end{figure}

%\begin{figure}[ht]
%\centering
%\includegraphics[width=.3\textwidth]{fig2.jpg}
%\caption{This figure is an example of a figure caption taking more than one
  %line and justified considering margins mentioned in Section~\ref{sec:figs}.}
%\label{fig:exampleFig2}
%\end{figure}

%\begin{table}[ht]
%\centering
%\caption{Variables to be considered on the evaluation of interaction
  %techniques}
%\label{tab:exTable1}
%\includegraphics[width=.7\textwidth]{table.jpg}
%\end{table}


\bibliographystyle{sbc}
\bibliography{datawarehouse}

\end{document}
